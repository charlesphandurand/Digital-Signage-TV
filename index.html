<!--
  Digital Signage Cermart
  Created by: Cermart Team
  Version: 1.0
  Description: A simple digital signage application to display images and videos.
-->

<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>Digital Signage Cermart</title>
  <style>
    body {
      margin: 0;
      background-color: black;
      overflow: hidden;
    }
    img, video {
      display: block;
      margin: auto;
      max-width: 100vw;
      max-height: 100vh;
      object-fit: contain;
      transition: opacity 1s;
    }
    video {
      background-color: black;
    }
  </style>
</head>
<body>
  <img id="promoImage" src="" style="display: none;">
  <video id="promoVideo" autoplay muted loop style="display: none;"></video>

  <!-- Muat daftar media dari file JS -->
  <script src="imagelist.js"></script>
  <script>
    // Urutkan nama file dari A-Z
    promos.sort();

    const imageElement = document.getElementById("promoImage");
    const videoElement = document.getElementById("promoVideo");
    let index = 0;

    function showMedia() {
      const file = promos[index].toLowerCase();

      // Sembunyikan keduanya dulu
      imageElement.style.display = "none";
      videoElement.style.display = "none";

      if (file.endsWith(".jpg") || file.endsWith(".jpeg") || file.endsWith(".png") || file.endsWith(".gif")) {
        imageElement.src = promos[index];
        imageElement.style.opacity = 0;
        imageElement.style.display = "block";
        setTimeout(() => imageElement.style.opacity = 1, 100);
      } else if (file.endsWith(".mp4") || file.endsWith(".webm") || file.endsWith(".mov") || file.endsWith(".avi")) {
        videoElement.src = promos[index];
        videoElement.load();
        videoElement.play();
        videoElement.style.opacity = 0;
        videoElement.style.display = "block";
        setTimeout(() => videoElement.style.opacity = 1, 100);
      }
    }

    function nextSlide() {
      if (promos.length <= 1) return;
      index = (index + 1) % promos.length;
      showMedia();
    }

    // Tangani error (jika file tidak bisa dimuat)
    imageElement.onerror = videoElement.onerror = function () {
      console.error("Gagal memuat media:", promos[index]);
      promos.splice(index, 1);
      if (promos.length === 0) return;
      index = index % promos.length;
      showMedia();
    };

    // Tampilkan media pertama
    if (promos.length > 0) {
      showMedia();
      setInterval(nextSlide, 5000); // Ganti setiap 5 detik
    }
  </script>
</body>
</html>

